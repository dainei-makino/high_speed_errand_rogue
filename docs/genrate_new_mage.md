# 新チャンク配置 ── 覚えるのはたった 2 ルール！

> **目的** : 迷路を“どこに”“どうやって”つなぐのかを最小限の言葉で整理。まずはこの 2 点さえ頭に入れておけば OK という超シンプル版です。

---

## 1. 置く向きは **ドア面の真正面**

- いま通過した **出口ドアがある壁面の外側** にだけ次チャンクを置く。
- 方角は N / E / S / W の 4 方向のうち、そのドアが開いた向きをそのまま採用。

図（例：東側にドアが開いた場合）

```
[旧チャンク]□□□□□□□□🚪┼   ← 共有壁 (┼)
             □□□□□□□□□
             □  新チャンク □
             □□□□□□□□□
```

> *イメージ*: 壁に貼り付けるようにブロックを足していく。

---

## 2. **入口と外周壁は共有・再利用**

- 既存チャンクと新チャンクは **外周 1 マスの壁を“真上から重ねる”** ことで密着。
- 共有部分の壁ブロックを両チャンク側で「床」に置き換え、**シームレスな通路**を作る。
- こうすることで “壁 2 枚厚” にならず、衝突判定も 1 枚で済む。
- 入口のすぐ内側1マスも床に変えておくと、プレイヤーが確実に迷路へ入れる。
- **出口が新チャンクの四隅に接しない** よう、サイズ差がある場合は1マスずらして配置する。

ポイントまとめ

| なぜ共有？     | 得られる効果             |
| --------- | ------------------ |
| 壁の厚みが増えない | 見た目の段差ゼロ、カメラが揺れない  |
| データ節約     | タイル数を削減、メモリ&ロード負荷↓ |
| 当たり判定が1箇所 | プレイヤーが引っ掛かるバグを防ぐ   |

---

これだけ覚えれば **「一直線に迷路が伸びる」＋「壁でズレない」** 連結が完成します！

---

## 3. 次チャンクのための余白チェック

- 新しいチャンクを置くときは、その出口の先に **少なくとも 2 つ** 連続でチャンクを
 置けるだけの空き領域があるかを確認する。
- 出口方向に空きがない場合は、チャンクを作り直して **出口の向きを変える**。方角を
 変えても配置できなければ、サイズを 1 段階小さくして再試行する。
- サイズ調整でも無理なときは、十字型の小さな "隙間埋めチャンク" を生成してつな
 げる。


© 2025 Dainei Makino

