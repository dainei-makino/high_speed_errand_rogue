# 迷路チャンク確定ロジック

> **目的** : 迷路生成とアイテム配置が完了したあと、チャンクとしてゲーム世界に反映するまでのフローをまとめる。

---

1. **入口/出口の確定**
   - 迷路生成後、必ず一か所は入口タイルを `TILE.FLOOR` で確保。
   - 出口候補は壁際から1マス内側に配置し、必要に応じて `TILE.DOOR` を設定。
2. **アイテム配置結果の書き込み**
   - 宝箱や鍵など、仮配置したアイテムを最終タイル配列に上書きする。
   - 重複を避けるため、配置後に周囲1マスを `TILE.FLOOR` へ統一。
3. **チャンクオブジェクト生成**
   - `MazeChunk` インスタンスにタイル配列、入口情報、アイテムリストを格納。
   - チャンクサイズやシード値もここで固定する。
4. **マネージャーへの登録**
   - `MazeManager.addChunk()` を呼び出し、描画用コンテナを作成。
   - TTL やフェード設定など寿命パラメータを同時に初期化。

この手順で **生成済みデータを確実にゲーム世界へ反映** し、後から上書きが発生しないようにする。

© 2025 Dainei Makino
