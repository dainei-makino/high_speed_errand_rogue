# ハイスピードおつかいローグ – アニメーション仕様

> **目的**: ゲーム内で発生するあらゆるイベントを視覚フィードバックで強調し、テンポ感と没入感を高める。

---

## 1. 動作別アニメーション一覧

| # | イベント / 状態 | アセット種別 | フレーム構成例 | Tween / Particle / シェーダ | 補足メモ |
|---|----------------|--------------|---------------|----------------------------|-----------|
| 1 | 主人公: **待機** | カエル正面スプライト | 2 f（呼吸） | `scaleY`±2 % / `y`±1 px で 0.8 s ループ | スカーフのみ軽く揺らすと生命感↑ |
| 2 | 主人公: **走り**<br>右・正面・後ろ | 32×32 ×6 f | 各向き 2 f ×8 fps | `x` 微振動でスピード演出 | 左走りは `flipX` で生成不要 |
| 3 | 主人公: **ジャンプ** | 同上 1 f | `y`‑12→0（0.25 s 弧） | 取得時小ジャンプで爽快感 |
| 4 | 主人公: **パワーアップ中** | 同 f | ランタイム色替え | `tint` Hue±60°／0.3 s 往復 | 無画像で多彩演出 |
| 5 | 主人公: **ダメージ** | 同 f | — | `alpha`1↔0 Flash ×6 | 壁衝突・消滅警告 |
| 6 | **宝箱: 待機** | タイル上スプライト | 2 f きらめき | `scale`1↔1.05 / Lightness±10 | ネオン光揺らぎ |
| 7 | **宝箱: 取得** | 1 f | `scale`1→1.4→0 (0.3 s) / `rot`0→180° | 星粒子30個・ADDブレンド | SE 同期 |
| 8 | **アイテム宝箱取得** | 色違い箱 | 同上 | Tween中 Hue ループ＋残像粒子 | レア感強調 |
| 9 | **出口ドア: 開放** | 2 f or Tween | `scaleX`1→0 (0.25 s) | 白ビーム粒子 0.5 s | 扉消滅後通過へ |
|10 | **出口通過** | — | — | `camera.flash`120 ms + `shake`3 px | スコアポップ表示 |
|11 | **チャンク生成** | — | — | Container `alpha`0→1 / `y`+24→0 (0.4 s) | 暗闇から島浮上 |
|12 | **チャンクフェード** | — | — | Lightness50→80%(120 ms) →`alpha`1→0 (360 ms) | 黒マスク拡張で飲込表現 |
|13 | **旧チャンク崩落** | — | — | 黒ブロック粒子が落下 | モバイル負荷時はOFF |
|14 | **次チャンク突入** | — | — | `camera.pan`400 ms + `zoom`1→0.95→1 | 島ジャンプ感 |
|15 | **残タイム警告** | UI 数字 | 2 f | `tint`赤 / `scale`1→1.2→1 | TTL≦2 sから開始 |
|16 | **ゲームオーバー** | — | — | 画面 `fade`#000 800 ms / LPF→200 Hz | 粒子が暗闇へ吸い込まれる |
|17 | 主人公: **急ブレーキ** | 同 f | — | 旧方向へ+6 px 40 ms → 20 ms静止 → 新方向へ通常比50%速度 | 180°方向転換時 |

---

## 2. 実装指針

1. **フレーム最小主義** — 走り 2 f など必要最低限に抑え、視覚的リッチさは Tween & Particle で補完。
2. **HSL 操作を多用** — 色相シフトでレア度、Lightness ブーストで発光、α フェードで消滅を表現。
3. **共通粒子テクスチャ** — `spark.png` (4×4 px 白ドット) を使い回し、`tint` で色多彩。
4. **カメラ演出優先** — `pan`, `zoom`, `flash` を組み合わせ、ハイスピード感を核心に。
5. **負荷スケーリング** — 旧チャンク崩落など高負荷演出はモバイル時軽減 or 無効化する。

---

これらを `animations.ts`（各スプライトフレーム&Phaserアニメ）と `effects.ts`（Tween/Particle関数）に整理しておくと、拡張や Codex への局所依頼が容易になります。

