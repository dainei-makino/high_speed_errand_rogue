# ハイスピードおつかいローグ – ゲーム概要

## 0. 一行キャッチコピー

拡張し続ける迷路を走り抜け、崩れゆく足場から生き残れ──疾走感全振りのハイスピード・ローグ。

---

## 1. 基本ルール

| 項目     | 内容                                                                                                                                                              |   |
| ------ | --------------------------------------------------------------------------------------------------------------------------------------------------------------- | - |
| マップ    | ランダム生成迷路のタイル(5×5 基本、10×10、長方形型などバリエーション) 。1つのタイルをクリアすると新たなタイルが連結生成し無限拡張。タイルは寿命を持っており、古いタイルは色が薄くなっていき時間とともに消滅する。タイル内には必ず1つづつ、入り口、出口、宝箱が生成される。確率で色違いのアイテム宝箱も出現する。 |   |
| 勝利条件   | 宝箱に触れると鍵を獲得。その部屋の出口を開けるようになる。出口から出るとスコア獲得。敗北するまでゲームはつづく。                                                                                                        |   |
| 敗北条件   | 消滅するタイルの上にいる                                                                                                                                                    |   |
| 操作     | WASD                                                                                                                                                            |   |
| パワーアップ | アイテム宝箱に触れると取得で、スピードアップ(10秒間、スピード1.5倍)、透明マント(2回だけ壁をすり抜けられる)などのアイテムを取得できる。                                                                                        |   |

---

## 2. ゲームフロー

1. **Maze Spawn**: 新しい迷路チャンクが生成。
2. **Traverse**: プレイヤーは宝箱を取りつつ出口へ移動。
3. **Extend**: 出口タイルに到達するとカメラがスクロールし、暗闇から次タイルが出現・アクティブ化。
4. **Fade‑Out**: n 秒経過した旧チャンクは彩度→ α 値を線形に下げ、完全透明後に消滅。
5. **Loop**: 1〜4 を繰り返し、消滅する時にプレイヤーが残っていればゲームオーバー。

---

## 3. コアメカニクス

- **迷路生成**: Depth‑First Search で作成 /出口は東西南北4方向、生成する際に次の迷路が生成できるように破綻しないことを考慮する。基本のチャンクサイズを設定し、ゲームが進むと徐々にチャンクを2つ並べた長方形の迷路や、変則サイズの迷路を生成するようにする。チャンクの生成テーブルを用意して、5個迷路を進むごとにテーブルを進めることでゲームの進行を表現する。
- **タイル管理**: `MazeChunk` クラス (size, tiles[], age, fading)
- 迷路フェードアウト: ゲームが進行するごとに徐々に早くしてプレイヤーへ緊張感を与える。
- **カメラ制御**: 新チャンクがアクティブになるたびチャンクが画面中央に来るようにスムーズスクロール。
- 仮想解像度480×270（16:9）にビューポートスケーリングを組み合わせてブラウザサイズいっぱいにゲーム画面を表示する。
- 迷路の床や壁、出口扉、主人公、宝箱などは全て32x32pxを基準とする。後々はアトラス化した画像を読み込んでアニメーションするが、仮置きとしてそれぞれの分かりやすい色をつけたものを描画する。画像を表示することを想定したコードにしておく。

---

---

## 4. ビジュアル&#x20;

- **配色**: HSL ベースのネオンパレット (Hue 160〜320 をメイン)。
- **アニメーション**: Tween/Particle で宝箱取得エフェクト、フェードは HSL-Lightness→α。
- 迷路以外は闇が広がっており、迷路が新規生成した時に、迷路が浮かび上がる。

---

## 5. 技術スタック

| レイヤ         | ライブラリ / サービス             | 説明                             |
| ----------- | ------------------------ | ------------------------------ |
| **ゲームエンジン** | **Phaser 3** (ESModules) | Tilemap, カメラ, Tween が標準搭載で拡張容易 |
| **音**       | Tone.js + Scribbletune   | コードだけでシンセ & パターン生成可能           |
| **デプロイ場所**  | Vercel                   | Vercel用の設定ファイルが必要              |

---



## 6. 拡張アイデア

- キャラクターのステータスと成長要素
- 敵キャラクター&ボスキャラクター
- ビジュアルや迷路構造、敵キャラクターなどを組み合わせたバイオーム要素
- パーティクルエフェクト&アニメーション
- ジェネラティブテクノBGM&SE
  - **BGM**: Tone.js + Scribbletune で 128 BPM、4‑on‑the‑floor キックにランダムシンセリード。
  - **SE**: 拾得 / 壁衝突 / 消滅警告 = 短い 8bit ノイズ。
- キャラクターのアトラス化した画像によるアニメーション

---

© 2025 Dainei Makino. All rights reserved.

