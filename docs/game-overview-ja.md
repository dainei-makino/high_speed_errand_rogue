# ハイスピードおつかいローグ – ゲーム概要

## 0. 一行キャッチコピー
常に拡張し続ける迷路を走り抜け、崩れゆく足場から生還せよ──疾走感全振りのハイスピード・ローグ。

---

## 1. 基本ルール
| 項目 | 内容 |
|------|------|
| マップ | ランダム生成迷路 (5×5 基本、7×7・10×10 などバリエーション) をタイル状に連結し無限拡張 |
| 勝利条件 | 制限時間内に可能な限り宝箱を集めてスコア更新 (終端なし、スコアアタック型) |
| 敗北条件 | ① 消滅フェーズに入った旧迷路上に 1 タイルでも残る ② 残機ゼロ (壁貫通回数使い切り後の衝突など) |
| 操作 | 矢印キー／WASD／タップスワイプで 1 マス移動 (グリッド基準) |
| パワーアップ | 色違い宝箱取得で **Speed Boost (5 秒間 1.5×)**、**Phase Shift (壁無視 2 ステップ)** など |

---

## 2. ゲームフロー
1. **Maze Spawn**: 画面右 (or 前方) に新しい迷路チャンクが生成。
2. **Traverse**: プレイヤーは宝箱を取りつつ出口へ移動。
3. **Extend**: 出口タイルに到達するとカメラがスクロールし、次チャンクがアクティブ化。
4. **Fade‑Out**: n 秒経過した旧チャンクは彩度→ α 値を線形に下げ、完全透明後に消滅。
5. **Loop**: 1〜4 を繰り返し、消滅時にプレイヤーが残っていればゲームオーバー。

---

## 3. コアメカニクス
- **迷路生成**: Depth‑First Search で壁掘り / サイズは RNG で選択。
- **タイル管理**: `MazeChunk` クラス (size, tiles[], age, fading)
- **フェードアルゴリズム**: chunk.age → chunk.alpha = max(0,1‑(age/TTL))
- **カメラ制御**: 新チャンクがアクティブになるたび `camera.lerpTo()` でスムーズスクロール。
- **パワーアップ**: `player.state = {speedMult, phaseStepLeft, timer}` を Tick 毎に更新。

---

## 4. レベル & 難易度パラメータ
| パラメータ | 初期値 (MVP) | スケール | 備考 |
|-------------|-------------|---------|------|
| チャンク TTL | 12 秒 | -1 秒 / 2 チャンク | 難易度上昇で崩壊が速く |
| 迷路サイズ | 5×5 固定 | 5→7→10 サイクル | スコアに応じて増減可 |
| 宝箱数 | 1 (金)+2 (色) | +1/チャンク | 金=必須、色=任意 |
| Speed Boost | 1.5× / 5 秒 | +0.1×/20 スコア | 30 秒 cap |

---

## 5. ビジュアル & サウンド指針
- **配色**: HSL ベースのネオンパレット (Hue 160〜320 をメイン)。
- **アニメーション**: Tween/Particle で宝箱取得エフェクト、フェードは HSL-Lightness→α。
- **BGM**: Tone.js + Scribbletune で 128 BPM、4‑on‑the‑floor キックにランダムシンセリード。
- **SE**: 拾得 / 壁衝突 / 消滅警告 = 短い 8bit ノイズ。

---

## 6. 技術スタック
| レイヤ | ライブラリ / サービス | 理由 |
|---------|----------------------|------|
| **ゲームエンジン** | **Phaser 3** (ESModules) | Tilemap, カメラ, Tween が標準搭載で拡張容易 |
| **音** | Tone.js + Scribbletune | コードだけでシンセ & パターン生成可能 |
| **デプロイ** | Vercel (静的 + Functions) | GitHub → Vercel 自動デプロイ、OGP 画像生成も可 |

---

## 7. MVP 範囲 (1〜2 週間)
1. 5×5 迷路 1 チャンクの生成・表示・移動判定
2. 出口到達 → 新チャンク生成 & カメラスクロール
3. Fade‑Out 処理 & Game‑Over 判定
4. 金宝箱のみ (スコア計算)・UI 表示
5. BGM 1 ループ & SE 2 種

---

## 8. 拡張アイデア
- チャンク接続方向を 4‑way ランダム (上下左右)
- 高難易度モード: 固定視点 + ミニマップ無し
- 同期スコアランキング (Vercel Edge × D1/Upstash)
- 視覚フィルタ：グリッチ / Bloom / CRT シェーダ

---

© 2025 Dainei Makino. All rights reserved.

